# 股票历史价格表字段说明

## 表名
`stocks_history` - 股票历史价格表（合并所有股票）

## 表描述
该表用于存储所有股票的历史交易数据，包括价格信息、成交量、成交额等关键交易指标。

## 字段详细说明

### 1. 基础信息字段

| 字段名 | 数据类型 | 是否必填 | 说明 |
|--------|----------|----------|------|
| `id` | INT | 是 | 自增主键，唯一标识每条记录 |
| `ts_code` | VARCHAR(16) | 是 | 股票代码，格式通常为：股票代码.交易所代码（如：000001.SZ） |
| `stock_name` | VARCHAR(32) | 否 | 股票中文名称 |
| `trade_date` | DATE | 是 | 交易日期，格式：YYYY-MM-DD |

### 2. 价格相关字段

| 字段名 | 数据类型 | 精度 | 是否必填 | 说明 |
|--------|----------|------|----------|------|
| `open` | DECIMAL(12,2) | 2位小数 | 否 | 开盘价，当日第一笔交易的价格 |
| `high` | DECIMAL(12,2) | 2位小数 | 否 | 最高价，当日交易中的最高价格 |
| `low` | DECIMAL(12,2) | 2位小数 | 否 | 最低价，当日交易中的最低价格 |
| `close` | DECIMAL(12,2) | 2位小数 | 否 | 收盘价，当日最后一笔交易的价格 |
| `pre_close` | DECIMAL(12,2) | 2位小数 | 否 | 昨收价，前一交易日的收盘价 |

### 3. 涨跌相关字段

| 字段名 | 数据类型 | 精度 | 是否必填 | 说明 |
|--------|----------|------|----------|------|
| `change` | DECIMAL(12,2) | 2位小数 | 否 | 涨跌额，当日收盘价与昨收价的差值 |
| `pct_chg` | DECIMAL(8,4) | 4位小数 | 否 | 涨跌幅，涨跌额占昨收价的百分比 |

### 4. 交易量相关字段

| 字段名 | 数据类型 | 精度 | 是否必填 | 说明 |
|--------|----------|------|----------|------|
| `vol` | DECIMAL(20,2) | 2位小数 | 否 | 成交量，单位为手（1手=100股） |
| `amount` | DECIMAL(20,2) | 2位小数 | 否 | 成交额，单位为元 |

## 数据示例

```sql
-- 示例数据
INSERT INTO stocks_history VALUES (
    1,                    -- id
    '000001.SZ',         -- ts_code (平安银行)
    '2024-01-15',        -- trade_date
    12.50,               -- open (开盘价)
    12.80,               -- high (最高价)
    12.30,               -- low (最低价)
    12.60,               -- close (收盘价)
    12.40,               -- pre_close (昨收价)
    0.20,                -- change (涨跌额)
    1.6129,              -- pct_chg (涨跌幅%)
    123456.00,           -- vol (成交量，手)
    1555555.56,          -- amount (成交额，元)
    '平安银行'            -- stock_name
);
```

## 索引建议

为了提高查询性能，建议创建以下索引：

1. **主键索引**：`id` (已自动创建)
2. **复合索引**：`(ts_code, trade_date)` - 用于按股票代码和日期查询
3. **单列索引**：`trade_date` - 用于按日期查询
4. **单列索引**：`ts_code` - 用于按股票代码查询

## 注意事项

1. **数据精度**：价格字段使用2位小数精度，涨跌幅使用4位小数精度
2. **字符编码**：表使用 `utf8mb4` 编码，支持中文字符
3. **数据完整性**：`ts_code` 和 `trade_date` 为必填字段
4. **数据范围**：
   - 价格字段通常为正值
   - 涨跌额可正可负（正表示上涨，负表示下跌）
   - 涨跌幅通常为百分比形式（如 1.6129 表示 1.6129%）
   - 成交量和成交额必须为正值

## 常见查询场景

1. **查询某只股票的历史数据**：
   ```sql
   SELECT * FROM stocks_history WHERE ts_code = '000001.SZ' ORDER BY trade_date DESC;
   ```

2. **查询某日期的所有股票数据**：
   ```sql
   SELECT * FROM stocks_history WHERE trade_date = '2024-01-15';
   ```

3. **查询涨幅最大的股票**：
   ```sql
   SELECT * FROM stocks_history WHERE trade_date = '2024-01-15' ORDER BY pct_chg DESC LIMIT 10;
   ```

4. **查询成交量最大的股票**：
   ```sql
   SELECT * FROM stocks_history WHERE trade_date = '2024-01-15' ORDER BY vol DESC LIMIT 10;
   ```